{"version":3,"sources":["talent-simulator/components/SvgTooltip.tsx","talent-simulator/components/Node.tsx","talent-simulator/components/index.ts","talent-simulator/Constants.ts","talent-simulator/TalentSimulator.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["SvgTooltip","children","tooltip","forceShow","target","useRef","useState","showTooltip","setShowTooltip","targetReady","setTargetReady","listeners","mouseOver","onMouseOver","onFocus","onMouseLeave","props","x","y","width","height","cx","cy","r","useEffect","viewBox","ref","style","visibility","current","align","bottom","trapFocus","Node","id","isSelected","nodes","prevNodesIndexes","nextNodesIndexes","onClick","isOpen","undefined","find","nodeIndex","isClickable","map","nextNode","x1","y1","z","x2","y2","stroke","key","circleRadius","cursor","fill","MAX_VALUE","NODES","type","point","name","value","TalentSimulator","showAllTooltip","setShowAllTooltip","totalPoints","setTotalPoints","summary","setSummary","size","maxValue","getSize","_nodes","getTooltip","description","Math","round","forEach","NODE","node","push","setNodes","Grid","rows","columns","gap","areas","start","end","Box","gridArea","background","Button","primary","label","Heading","Object","keys","Text","index","_node","splice","_summary","console","log","theme","global","colors","brand","font","family","AppBar","tag","direction","justify","pad","left","right","vertical","elevation","zIndex","App","Grommet","full","ResponsiveContext","Consumer","level","margin","flex","overflow","horizontal","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.f08d33d4.chunk.js","sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport { Drop } from 'grommet';\n\nexport interface SvgTooltipProps {\n  /**\n   * Should be a single svg element that tooltip attaches to.\n   * Currently only support child that has width and height.\n   * If x, y omitted would assume x = 0 and y = 0.\n   */\n  children: JSX.Element;\n  /** Tooltip to be displayed upon mouse hover */\n  tooltip: string | JSX.Element;\n  /** Force to show the tooltip without mouse over */\n  forceShow?: boolean;\n}\n\nexport const SvgTooltip = ({ children, tooltip, forceShow }: SvgTooltipProps) => {\n  const target = useRef(null) as React.MutableRefObject<HTMLDivElement | null>;\n  const [showTooltip, setShowTooltip] = useState(false);\n  const [targetReady, setTargetReady] = useState(false);\n\n  let listeners = {};\n  if (!forceShow) {\n    const mouseOver = () => setShowTooltip(true);\n    const mouseLeave = () => setShowTooltip(false);\n    listeners = {\n      onMouseOver: mouseOver,\n      onFocus: mouseOver,\n      onMouseLeave: mouseLeave,\n    };\n  }\n\n  let { x = 0, y = 0, width = 0, height = 0, cx, cy, r } = children.props;\n\n  if (!!cx && !!cy && !!r) {\n    x = cx - r;\n    y = cy - r;\n    width = 2 * r;\n    height = 2 * r;\n  }\n\n  // To fix the issue when target ref is not ready on the first rendering\n  // Rerender after target ref is ready\n  // https://stackoverflow.com/questions/56541342/react-hooks-why-is-current-null-for-useref-hook\n  useEffect(() => {\n    setTargetReady(true);\n  }, [target]);\n\n  return (\n    <>\n      <svg x={x} y={y} width={width} height={height} viewBox={`${x} ${y} ${width} ${height}`} {...listeners}>\n        <foreignObject x={x} y={y} width={width} height={height}>\n          {/* since tooltip could not pin to svg elements, using a invisible div here to provide a placeholder for tooltip to pin to */}\n          <div ref={target} style={{ width: '100%', height: '100%', visibility: 'hidden' }} />\n          {/* Due to grommet limitation, using grommet component may cause error when either  */}\n          {/* 1. not wrapped within an AppContainer or  */}\n          {/* 2. somehow top level AppContainer is rendered after some grommet component; */}\n          {/* therefore, adding a local AppContainer to workaround this potential issue */}\n          {targetReady && (showTooltip || forceShow) && target.current && (\n            <Drop\n              align={{ bottom: 'top' }}\n              target={target.current}\n              // trapFocus set to false allows tabbing through\n              trapFocus={false}>\n              {tooltip}\n            </Drop>\n          )}\n        </foreignObject>\n        {/* target svg component needs to be at end so it would not be covered by the placeholder div */}\n        {children}\n      </svg>\n    </>\n  );\n};\n","import React from 'react';\n\nimport { SvgTooltip } from './SvgTooltip';\n\nimport { NodeType } from './types';\n\nexport interface NodeProps extends Omit<NodeType, 'id'> {\n  onClick: () => void;\n  showTooltip?: boolean;\n  [otherProp: string]: any;\n}\n\nexport const Node = ({\n  x,\n  y,\n  id,\n  isSelected,\n  nodes,\n  prevNodesIndexes,\n  nextNodesIndexes,\n  onClick,\n  tooltip,\n  showTooltip,\n}: NodeProps) => {\n  const circleRadius = 2.5;\n  const sideLength = circleRadius * 2;\n\n  let isOpen = false;\n\n  if (!isSelected) {\n    isOpen =\n      id === 0 ||\n      prevNodesIndexes.find(nodeIndex => nodes[nodeIndex].isSelected) !== undefined ||\n      nextNodesIndexes.find(nodeIndex => nodes[nodeIndex].isSelected) !== undefined;\n  }\n\n  const isClickable = isSelected || isOpen;\n\n  // if (isOpen) {\n  //   o\n  // }\n  // console.log('#Yuyu ', id, prevNodesIndexes, nextNodesIndexes);\n  // console.log('#Yuyu ', id, nodes[id]);\n  // console.log('#Yuyu nodes', nodes);\n\n  return (\n    <>\n      {nextNodesIndexes.map(nodeIndex => {\n        const nextNode = nodes[nodeIndex];\n        return (\n          <line\n            x1={x}\n            y1={y}\n            z={100}\n            x2={nextNode.x}\n            y2={nextNode.y}\n            stroke={isSelected && nextNode.isSelected ? 'blue' : 'black'}\n            key={`${id}-${nextNode.id}`}></line>\n        );\n      })}\n      <svg\n        x={x - circleRadius}\n        y={y - circleRadius}\n        width={sideLength}\n        height={sideLength}\n        viewBox={`0 0 ${sideLength} ${sideLength}`}\n        onClick={isClickable ? onClick : () => {}}\n        style={isClickable ? { cursor: 'pointer' } : undefined}>\n        <SvgTooltip tooltip={tooltip || ''} forceShow={showTooltip}>\n          <circle\n            cx={circleRadius}\n            cy={circleRadius}\n            r={circleRadius}\n            fill={isSelected ? 'blue' : isOpen ? 'green' : 'gray'}></circle>\n        </SvgTooltip>\n      </svg>\n    </>\n  );\n};\n","export { Node } from './Node';\nexport { SvgTooltip } from './SvgTooltip';\nexport * from './types';\n","// export const  = {\n//   skill\n// }\n\n// const getRange = (min: number, max: number, step?: number = 1) =>\n//   Array.from(new Array(max > min ? Math.ceil((max - min) / step) : Math.ceil((min - max) / step)), (x, i) =>\n//     max > min ? i * step + min : min - i * step\n//   ).join(' | ');\n\n// explained at https://rares.uk/typescript-unextend-interface/\nexport type Omit<T, K extends keyof T> = Pick<T, Exclude<keyof T, K>>;\n\nexport const MAX_VALUE = {\n  x: 6,\n  y: 30,\n};\n\nexport type NodeTypeType = 'stats' | 'skill' | 'special';\n\nexport type NODEType = {\n  id: number;\n  x: number;\n  y: number;\n  type: NodeTypeType;\n  point: 3 | 4 | 5;\n  name: string;\n  value?: number;\n  description?: string;\n  prevNodesIndexes: number[];\n};\n\nexport type NODESType = NODEType[];\n\nexport const NODES: NODESType = [\n  {\n    id: 0,\n    x: 2,\n    y: 0,\n    type: 'stats',\n    point: 3,\n    name: '威',\n    value: 5,\n    prevNodesIndexes: [],\n  },\n  {\n    id: 1,\n    x: 4,\n    y: 2,\n    type: 'stats',\n    point: 3,\n    name: '耐',\n    value: 5,\n    prevNodesIndexes: [0],\n  },\n  {\n    id: 2,\n    x: 5,\n    y: 3,\n    type: 'stats',\n    point: 3,\n    name: '秘',\n    value: 5,\n    prevNodesIndexes: [1],\n  },\n  {\n    id: 3,\n    x: 2,\n    y: 4,\n    type: 'stats',\n    point: 3,\n    name: '运',\n    value: 5,\n    prevNodesIndexes: [1],\n  },\n  {\n    id: 4,\n    x: 1,\n    y: 5,\n    type: 'stats',\n    point: 3,\n    name: '全属性',\n    value: 3,\n    prevNodesIndexes: [3],\n  },\n  {\n    id: 5,\n    x: 3,\n    y: 5,\n    type: 'stats',\n    point: 3,\n    name: '敏',\n    value: 5,\n    prevNodesIndexes: [2, 3],\n  },\n  {\n    id: 6,\n    x: 3,\n    y: 7,\n    type: 'stats',\n    point: 3,\n    name: '一转',\n    value: 2,\n    prevNodesIndexes: [5],\n  },\n  {\n    id: 7,\n    x: 5,\n    y: 7,\n    type: 'stats',\n    point: 3,\n    name: '一转',\n    value: 2,\n    prevNodesIndexes: [2],\n  },\n  {\n    id: 8,\n    x: 6,\n    y: 8,\n    type: 'stats',\n    point: 3,\n    name: '运',\n    value: 5,\n    prevNodesIndexes: [7],\n  },\n  {\n    id: 9,\n    x: 1,\n    y: 9,\n    type: 'stats',\n    point: 3,\n    name: '耐',\n    value: 5,\n    prevNodesIndexes: [6],\n  },\n  {\n    id: 10,\n    x: 3,\n    y: 9,\n    type: 'stats',\n    point: 3,\n    name: '敏',\n    value: 5,\n    prevNodesIndexes: [6],\n  },\n  {\n    id: 11,\n    x: 5,\n    y: 9,\n    type: 'stats',\n    point: 3,\n    name: '威',\n    value: 5,\n    prevNodesIndexes: [7],\n  },\n  {\n    id: 12,\n    x: 2,\n    y: 10,\n    type: 'stats',\n    point: 3,\n    name: '普攻',\n    value: 0.07,\n    prevNodesIndexes: [9, 10],\n  },\n  {\n    id: 13,\n    x: 4,\n    y: 10,\n    type: 'stats',\n    point: 3,\n    name: '腕力',\n    value: 0.5,\n    prevNodesIndexes: [11],\n  },\n  {\n    id: 14,\n    x: 6,\n    y: 10,\n    type: 'stats',\n    point: 3,\n    name: '秘',\n    value: 5,\n    prevNodesIndexes: [8],\n  },\n  {\n    id: 15,\n    x: 1,\n    y: 13,\n    type: 'special',\n    point: 3,\n    name: '燃烧间隔-50%',\n    prevNodesIndexes: [9],\n  },\n  {\n    id: 16,\n    x: 3,\n    y: 13,\n    type: 'stats',\n    point: 3,\n    name: '二转',\n    value: 2,\n    prevNodesIndexes: [14],\n  },\n  {\n    id: 17,\n    x: 2,\n    y: 14,\n    type: 'stats',\n    point: 3,\n    name: '全抗性',\n    value: 0.04,\n    prevNodesIndexes: [],\n  },\n  {\n    id: 18,\n    x: 1,\n    y: 15,\n    type: 'stats',\n    point: 3,\n    name: '二转',\n    value: 2,\n    prevNodesIndexes: [15, 17],\n  },\n  {\n    id: 19,\n    x: 3,\n    y: 15,\n    type: 'stats',\n    point: 3,\n    name: '全属性',\n    value: 3,\n    prevNodesIndexes: [16],\n  },\n  {\n    id: 20,\n    x: 0,\n    y: 16,\n    type: 'skill',\n    point: 3,\n    name: '生命绽放',\n    // description: '加血',\n    prevNodesIndexes: [18],\n  },\n  {\n    id: 21,\n    x: 2,\n    y: 16,\n    type: 'stats',\n    point: 3,\n    name: '暴击率',\n    value: 0.05,\n    prevNodesIndexes: [17, 19],\n  },\n];\n","import React, { useState } from 'react';\nimport { Heading, Button, Text, Grid, Box } from 'grommet';\n\nimport { MAX_VALUE, NODES } from './Constants';\n\nimport { Node, NodeType } from './components';\n\nconst SCALE = 3;\n\nexport function TalentSimulator() {\n  const [showAllTooltip, setShowAllTooltip] = useState(false);\n  const [totalPoints, setTotalPoints] = useState(0);\n  const [summary, setSummary] = useState({} as { [key: string]: number | undefined });\n\n  const getSize = (maxValue: any) => {\n    const width = maxValue.x * 20 + 20;\n    const height = maxValue.y * 10 + 10;\n    return { width, height, viewBox: `-10 -5 ${width} ${height}` };\n  };\n\n  const size = getSize(MAX_VALUE);\n\n  const _nodes: NodeType[] = [];\n\n  const getTooltip = ({\n    type,\n    name,\n    value = 0,\n    description = '',\n  }: {\n    type: string;\n    name: string;\n    value?: number;\n    description?: string;\n  }) => {\n    if (type === 'stats') {\n      return `${name}+${value >= 1 ? value : `${Math.round(value * 100)}%`}`;\n    } else if (type === 'skill') {\n      return `${name}\\n${description}`;\n    } else {\n      return `${name}`;\n    }\n  };\n\n  NODES.forEach(NODE => {\n    const node: NodeType = {\n      id: NODE.id,\n      isSelected: false,\n      x: NODE.x * 20,\n      y: size.height - NODE.y * 10 - 20,\n      point: NODE.point,\n      name: NODE.name,\n      value: NODE.value,\n      description: NODE.description,\n      tooltip: getTooltip(NODE),\n      nextNodesIndexes: [],\n      prevNodesIndexes: NODE.prevNodesIndexes,\n    };\n    node.prevNodesIndexes.forEach(nodeIndex => {\n      const prevNode: NodeType = _nodes[nodeIndex];\n      prevNode.nextNodesIndexes.push(node.id);\n    });\n    _nodes.push(node);\n  });\n\n  const [nodes, setNodes] = useState(_nodes);\n\n  const onClick = (index: number) => {\n    const _node = nodes[index];\n    const _nodes = [...nodes];\n    _nodes.splice(index, 1, { ..._node, isSelected: !_node.isSelected });\n    // console.log('#Yuyu ', _nodes);\n    setTotalPoints(totalPoints + (_node.isSelected ? -_node.point : _node.point));\n    setNodes(_nodes);\n    const _summary = { ...summary };\n    if (_summary[_node.name] && _node.value) {\n      _summary[_node.name] = (_summary[_node.name] || 0) + (_node.isSelected ? -_node.value : _node.value);\n    } else {\n      _summary[_node.name] = _node.value;\n    }\n    setSummary(_summary);\n    console.log('#Yuyu ', _summary);\n  };\n\n  const clearAll = () => {\n    setTotalPoints(0);\n    setNodes(_nodes);\n    setSummary({});\n  };\n\n  return (\n    <>\n      <Grid\n        fill={true}\n        rows={['100%']}\n        columns={['50%', '50%']}\n        gap=\"small\"\n        areas={[\n          { name: 'nav', start: [0, 0], end: [0, 0] },\n          { name: 'main', start: [1, 0], end: [1, 0] },\n        ]}>\n        <Box gridArea=\"nav\" background=\"light-5\">\n          <Grid\n            fill=\"horizontal\"\n            rows={['xxsmall']}\n            columns={['45%', '45%']}\n            gap=\"small\"\n            areas={[\n              { name: 'button1', start: [0, 0], end: [0, 0] },\n              { name: 'button2', start: [1, 0], end: [1, 0] },\n            ]}>\n            <Button\n              gridArea=\"button1\"\n              primary\n              label={showAllTooltip ? '全部隐藏' : '全部显示'}\n              onClick={() => setShowAllTooltip(!showAllTooltip)}\n            />\n            <Button gridArea=\"button2\" fill={false} primary label={'重置'} onClick={() => clearAll()} />\n          </Grid>\n          <Heading size=\"small\">{totalPoints}</Heading>\n          {Object.keys(summary).map(key => {\n            const value = summary[key];\n            if (value === undefined) {\n              return <Text>{key}</Text>;\n            } else if (value > 0) {\n              return <Text>{`${key}+${value > 1 ? value : `${Math.round(value * 100)}%`}`}</Text>;\n            }\n            return null;\n          })}\n        </Box>\n        <Box gridArea=\"main\" background=\"light-2\">\n          <svg width={size.width * SCALE} height={size.height * SCALE} viewBox={size.viewBox}>\n            <rect x={-10} y={-10} width=\"100%\" height=\"100%\" fill=\"Cyan\"></rect>\n\n            {nodes.map(node => (\n              <Node\n                {...node}\n                onClick={() => onClick(node.id)}\n                nodes={nodes}\n                showTooltip={showAllTooltip}\n                key={node.id}></Node>\n            ))}\n          </svg>\n        </Box>\n      </Grid>\n    </>\n  );\n}\n","import React from 'react';\nimport { Grommet, Box, Heading, ResponsiveContext } from 'grommet';\n// import { FormClose, Notification } from 'grommet-icons';\nimport { TalentSimulator } from './talent-simulator/TalentSimulator';\n\nconst theme = {\n  global: {\n    colors: {\n      brand: '#228BE6',\n    },\n    font: {\n      family: 'Roboto',\n      size: '18px',\n      height: '20px',\n    },\n  },\n};\n\nconst AppBar = (props: any) => (\n  <Box\n    tag=\"header\"\n    direction=\"row\"\n    align=\"center\"\n    justify=\"between\"\n    background=\"brand\"\n    pad={{ left: 'medium', right: 'small', vertical: 'small' }}\n    elevation=\"medium\"\n    style={{ zIndex: '1' }}\n    {...props}\n  />\n);\n\nfunction App() {\n  // const [showSidebar, setShowSidebar] = useState(false);\n\n  return (\n    <Grommet theme={theme} full>\n      <ResponsiveContext.Consumer>\n        {size => (\n          <Box fill>\n            <AppBar>\n              <Heading level=\"3\" margin=\"none\">\n                不朽星图模拟器\n              </Heading>\n              {/* sidebar example */}\n              {/* <Button icon={<Notification />} onClick={() => setShowSidebar(!showSidebar)} /> */}\n            </AppBar>\n            <Box direction=\"row\" flex overflow={{ horizontal: 'hidden' }}>\n              <Box flex align=\"center\" justify=\"center\">\n                <TalentSimulator />\n              </Box>\n              {/* sidebar example */}\n              {/* {size !== 'small' ? (\n                <Collapsible direction=\"horizontal\" open={showSidebar}>\n                  <Box flex width=\"medium\" background=\"light-2\" elevation=\"small\" align=\"center\" justify=\"center\">\n                    sidebar\n                  </Box>\n                </Collapsible>\n              ) : (\n                showSidebar && (\n                  <Layer>\n                    <Box background=\"light-2\" tag=\"header\" justify=\"end\" align=\"center\" direction=\"row\">\n                      <Button icon={<FormClose />} onClick={() => setShowSidebar(false)} />\n                    </Box>\n                    <Box fill background=\"light-2\" align=\"center\" justify=\"center\">\n                      sidebar\n                    </Box>\n                  </Layer>\n                )\n              )} */}\n            </Box>\n          </Box>\n        )}\n      </ResponsiveContext.Consumer>\n    </Grommet>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}